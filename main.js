(()=>{"use strict";function e(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",r),document.addEventListener("click",o)}function t(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",r),document.removeEventListener("click",o)}function r(e){"Escape"===e.key&&t(document.querySelector(".popup_is-opened"))}function o(e){e.target.classList.contains("popup_is-opened")&&t(document.querySelector(".popup_is-opened"))}var n=document.querySelector("#card-template").content,c=document.querySelector(".places__list"),i=document.querySelector(".popup_type_image"),u=i.querySelector(".popup__image"),p=i.querySelector(".popup__caption");function a(e,t){var r=n.cloneNode(!0),o=r.querySelector(".card__image");return o.src=t,o.alt=e,r.querySelector(".card__title").textContent=e,r.querySelector(".card__like-button").addEventListener("click",(function(e){e.target.classList.toggle("card__like-button_is-active")})),r.querySelector(".card__delete-button").addEventListener("click",(function(e){e.target.closest(".places__item").remove()})),o.addEventListener("click",l),r}function l(t){u.src=t.target.src,u.alt=t.target.alt,p.textContent=t.target.alt,e(i)}var s=document.querySelector(".content"),d=document.querySelector(".popup_type_edit"),_=document.querySelector(".popup_type_new-card"),f=s.querySelector(".profile__edit-button"),m=s.querySelector(".profile__add-button"),y=document.querySelectorAll(".popup__close-button"),v=d.querySelector(".popup__input_type_name"),q=d.querySelector(".popup__input_type_description"),x=_.querySelector(".popup__input_type_card-name"),S=_.querySelector(".popup__input_type_url"),k=s.querySelector(".profile__title"),L=s.querySelector(".profile__description"),b=d.querySelector(".popup__form"),g=_.querySelector(".popup__form");f.addEventListener("click",(function(){v.value=k.textContent,q.value=L.textContent,e(d)})),m.addEventListener("click",(function(){return e(_)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Оберстдорф, Германия",link:"https://images.unsplash.com/photo-1688455524398-09e385936a09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Сен-Жерве-ле-Бен, Франция",link:"https://images.unsplash.com/photo-1606730004798-e77a54f5e46e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"},{name:"Кефалиния, Греция",link:"https://images.unsplash.com/photo-1631992339428-8ab5567b0eed?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=a(e.name,e.link);c.append(t)})),Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){Array.from(e.querySelectorAll(".form__input")).forEach((function(t){t.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),r.classList.remove("form__input-error_active"),r.textContent=""}(e,t):function(e,t,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),o.textContent=r,o.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(e,t)}))}))}(e)})),y.forEach((function(e){var r=e.closest(".popup");e.addEventListener("click",(function(){return t(r)}))})),g.addEventListener("submit",(function(e){e.preventDefault();var r=a(x.value,S.value);c.prepend(r),t(_),e.target.reset()})),b.addEventListener("submit",(function(e){e.preventDefault(),k.textContent=v.value,L.textContent=q.value,t(d)}))})();